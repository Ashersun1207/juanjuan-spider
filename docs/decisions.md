# web-scraper — 决策记录

---

## D1: 定位为通用爬虫工具（2026-02-26）

**背景**：讨论 web-scraper 的定位
**决策**：通用工具，不局限于金融场景，覆盖所有需要浏览器渲染+反检测的抓取需求
**理由**：
- 爬虫能力是通用的，金融只是使用场景之一
- 新闻、论坛、产品页、文档站、研报都会用到
- 保持通用性，未来可独立发展或集成到任何项目
**影响**：架构设计不针对特定领域，站点适配器作为可插拔模块

## D2: 独立仓库 + Python 技术栈（2026-02-26）

**背景**：放 gainlab-mcp 里还是独立仓库？Python 还是改写 TS？
**决策**：独立仓库 `web-scraper/`，保持 Python
**理由**：
- Playwright Python 生态比 Node 成熟（stealth 库、readability 等）
- 独立仓库方便单独维护和升级依赖
- gainlab-mcp 那边加 tool 代理调用即可
**影响**：技术栈不统一（Python vs TS），但利大于弊

## D3: Readability 作为默认正文提取（2026-02-25）

**背景**：v0.1 内容提取靠启发式去 nav/header/footer，效果一般
**决策**：引入 readability-lxml（Mozilla Readability Python 移植），作为默认提取方式
**理由**：
- Firefox 阅读模式验证过的算法，成熟可靠
- 自动去广告/导航/侧边栏，输出干净正文
- `--raw` 可跳过，保留灵活性
**影响**：新增依赖 readability-lxml，输出质量显著提升

## D4: 代理策略 — 默认走 Clash（2026-02-25）

**背景**：很多目标站点需要代理才能访问
**决策**：默认走本机 Clash（127.0.0.1:7897），`--no-proxy` 可关
**理由**：本机 Clash 稳定可用，不需要额外代理服务
**影响**：国内站点记得加 --no-proxy

---

_Last updated: 2026-02-26_
